# BÃO CÃO PHÃ‚N TÃCH CHá»¨C NÄ‚NG VÃ€ Lá»– Há»NG SOURCE

---

## ğŸ“‘ Má»¥c lá»¥c
- [1. Giá»›i thiá»‡u chung](#1-giá»›i-thiá»‡u-chung)
- [2. Kiáº¿n trÃºc tá»•ng thá»ƒ & cáº¥u trÃºc thÆ° má»¥c](#2-kiáº¿n-trÃºc-tá»•ng-thá»ƒ--cáº¥u-trÃºc-thÆ°-má»¥c)
- [3. PhÃ¢n tÃ­ch báº£o máº­t mÃ£ hÃ³a Ä‘áº§u cuá»‘i (E2EE) cho tin nháº¯n](#3-phÃ¢n-tÃ­ch-báº£o-máº­t-mÃ£-hÃ³a-Ä‘áº§u-cuá»‘i-e2ee-cho-tin-nháº¯n)
- [4. ThÃ´ng tin vá» Miniapp/Inapp](#4-thÃ´ng-tin-vá»-miniappinapp)
- [5. PhÃ¢n tÃ­ch chá»©c nÄƒng tá»«ng module](#5-phÃ¢n-tÃ­ch-chá»©c-nÄƒng-tá»«ng-module)
- [6. PhÃ¢n tÃ­ch luá»“ng nghiá»‡p vá»¥ thá»±c táº¿](#6-phÃ¢n-tÃ­ch-luá»“ng-nghiá»‡p-vá»¥-thá»±c-táº¿)
- [7. Quy táº¯c coding, style guide, checklist review code](#7-quy-táº¯c-coding-style-guide-checklist-review-code)
- [8. PhÃ¢n tÃ­ch lá»— há»•ng OWASP Mobile](#8-phÃ¢n-tÃ­ch-lá»—-há»•ng-owasp-mobile)
- [9. Quy trÃ¬nh DevOps, CI/CD, quáº£n lÃ½ release](#9-quy-trÃ¬nh-devops-cicd-quáº£n-lÃ½-release)
- [10. Phá»¥ lá»¥c](#10-phá»¥-lá»¥c)

---

## 1. Giá»›i thiá»‡u chung

### 1.1. Bá»‘i cáº£nh dá»± Ã¡n
Dá»± Ã¡n Zalo lÃ  má»™t á»©ng dá»¥ng nháº¯n tin, gá»i Ä‘iá»‡n, chia sáº» file, hÃ¬nh áº£nh, video Ä‘a ná»n táº£ng, phá»¥c vá»¥ hÃ ng triá»‡u ngÆ°á»i dÃ¹ng táº¡i Viá»‡t Nam vÃ  quá»‘c táº¿. á»¨ng dá»¥ng Ä‘Æ°á»£c phÃ¡t triá»ƒn trÃªn ná»n táº£ng Android vá»›i kiáº¿n trÃºc module hÃ³a, há»— trá»£ má»Ÿ rá»™ng, báº£o trÃ¬ vÃ  tÃ­ch há»£p nhiá»u tÃ­nh nÄƒng hiá»‡n Ä‘áº¡i nhÆ° chat nhÃ³m, gá»i video, gá»­i file lá»›n, báº£o máº­t Ä‘a lá»›p, há»— trá»£ Ä‘a ngÃ´n ngá»¯, tÃ­ch há»£p AI, v.v.

### 1.2. Má»¥c tiÃªu cá»§a bÃ¡o cÃ¡o
- PhÃ¢n tÃ­ch toÃ n diá»‡n cáº¥u trÃºc source, chá»©c nÄƒng, luá»“ng nghiá»‡p vá»¥, báº£o máº­t, resource, asset, config, quy trÃ¬nh DevOps, kiá»ƒm thá»­, release.
- ÄÃ¡nh giÃ¡ cÃ¡c Ä‘iá»ƒm máº¡nh/yáº¿u, lá»— há»•ng tiá»m áº©n, Ä‘á» xuáº¥t cáº£i tiáº¿n.
- LÃ  tÃ i liá»‡u tham kháº£o cho developer, QA, DevOps, quáº£n lÃ½ dá»± Ã¡n, reviewer, auditor ná»™i bá»™.

### 1.3. Pháº¡m vi phÃ¢n tÃ­ch
- Táº­p trung vÃ o thÆ° má»¥c `src/main` vÃ  cÃ¡c thÆ° má»¥c con: `java`, `res`, `assets`, `META-INF`, config, ...
- Bao quÃ¡t cÃ¡c module chÃ­nh: UI, API, session, media, asset, config, log, notification, backup, database, ...
- PhÃ¢n tÃ­ch chi tiáº¿t cÃ¡c class trá»ng yáº¿u: `SessionManager.java`, `ApiManager.java`, `w.java`, ...
- ÄÃ¡nh giÃ¡ resource, asset, config, quy trÃ¬nh kiá»ƒm thá»­, báº£o máº­t, release.

### 1.4. Äá»‘i tÆ°á»£ng sá»­ dá»¥ng tÃ i liá»‡u
- Developer, QA, DevOps, quáº£n lÃ½ dá»± Ã¡n, reviewer, auditor ná»™i bá»™, sinh viÃªn thá»±c táº­p, Ä‘á»‘i tÃ¡c tÃ­ch há»£p.
- CÃ³ thá»ƒ dÃ¹ng lÃ m tÃ i liá»‡u Ä‘Ã o táº¡o, onboarding, kiá»ƒm thá»­, audit báº£o máº­t, review code, chuáº©n hÃ³a quy trÃ¬nh.

### 1.5. Ã nghÄ©a thá»±c tiá»…n
- GiÃºp náº¯m báº¯t nhanh kiáº¿n trÃºc, luá»“ng nghiá»‡p vá»¥, cÃ¡c Ä‘iá»ƒm cáº§n lÆ°u Ã½ khi phÃ¡t triá»ƒn, báº£o trÃ¬, kiá»ƒm thá»­.
- LÃ m cÆ¡ sá»Ÿ cho viá»‡c má»Ÿ rá»™ng, refactor, tÃ­ch há»£p module má»›i, kiá»ƒm thá»­ tá»± Ä‘á»™ng, audit báº£o máº­t.
- Há»— trá»£ chuáº©n hÃ³a coding style, quy trÃ¬nh DevOps, kiá»ƒm thá»­, release.

### 1.6. CÃ¡c Ä‘iá»ƒm ná»•i báº­t cá»§a source
- Quy mÃ´ lá»›n: hÃ ng ngÃ n file, hÃ ng trÄƒm nghÃ¬n dÃ²ng code, nhiá»u module Ä‘á»™c láº­p.
- Kiáº¿n trÃºc module hÃ³a, tÃ¡ch biá»‡t rÃµ UI, API, session, media, asset, config, ...
- Há»— trá»£ Ä‘a ná»n táº£ng, Ä‘a ngÃ´n ngá»¯, tá»‘i Æ°u hiá»‡u nÄƒng, báº£o máº­t nhiá»u lá»›p.
- Sá»­ dá»¥ng nhiá»u resource, asset Ä‘á»™ng, há»— trá»£ update khÃ´ng cáº§n release láº¡i app.
- Quy trÃ¬nh DevOps, CI/CD hiá»‡n Ä‘áº¡i, kiá»ƒm thá»­ tá»± Ä‘á»™ng, release nhanh.

### 1.7. CÃ¡c thÃ¡ch thá»©c khi phÃ¢n tÃ­ch
- Sá»‘ lÆ°á»£ng file lá»›n, nhiá»u module, nhiá»u class phá»©c táº¡p, nhiá»u luá»“ng nghiá»‡p vá»¥ Ä‘an xen.
- Äa dáº¡ng resource, asset, config, nhiá»u loáº¡i dá»¯ liá»‡u Ä‘á»™ng.
- YÃªu cáº§u báº£o máº­t cao, kiá»ƒm thá»­ Ä‘a ná»n táº£ng, Ä‘a thiáº¿t bá»‹.
- Cáº§n mapping giá»¯a chá»©c nÄƒng, class, resource, asset, config, log, ...

### 1.8. PhÆ°Æ¡ng phÃ¡p tiáº¿p cáº­n phÃ¢n tÃ­ch
- Káº¿t há»£p phÃ¢n tÃ­ch tÄ©nh (code, resource, asset, config) vÃ  Ä‘á»™ng (luá»“ng nghiá»‡p vá»¥, log, kiá»ƒm thá»­).
- Sá»­ dá»¥ng checklist, báº£ng tá»•ng há»£p, sÆ¡ Ä‘á»“, vÃ­ dá»¥ code, mapping, báº£ng lá»—i, báº£ng resource, báº£ng phÃ¢n quyá»n, mapping OWASP, ...
- Äá»‘i chiáº¿u vá»›i best practice ngÃ nh, tiÃªu chuáº©n báº£o máº­t, coding style, quy trÃ¬nh DevOps hiá»‡n Ä‘áº¡i.

### 1.9. Cáº¥u trÃºc bÃ¡o cÃ¡o
- Giá»›i thiá»‡u chung, kiáº¿n trÃºc tá»•ng thá»ƒ, phÃ¢n tÃ­ch module, phÃ¢n tÃ­ch resource/asset/config, phÃ¢n tÃ­ch báº£o máº­t, quy trÃ¬nh DevOps, checklist kiá»ƒm thá»­, mapping chá»©c nÄƒng/class/resource, phá»¥ lá»¥c má»Ÿ rá»™ng.
- CÃ³ sÆ¡ Ä‘á»“, báº£ng tá»•ng há»£p, checklist, vÃ­ dá»¥ code, mapping, hÆ°á»›ng dáº«n kiá»ƒm thá»­, hÆ°á»›ng dáº«n sá»­ dá»¥ng, máº«u log, máº«u bÃ¡o cÃ¡o lá»—i, ...

### 1.10. HÆ°á»›ng dáº«n Ä‘á»c vÃ  sá»­ dá»¥ng tÃ i liá»‡u
- Äá»c tá»« trÃªn xuá»‘ng Ä‘á»ƒ náº¯m tá»•ng quan, sau Ä‘Ã³ tra cá»©u tá»«ng pháº§n chi tiáº¿t theo nhu cáº§u.
- Sá»­ dá»¥ng báº£ng tá»•ng há»£p, checklist, mapping Ä‘á»ƒ kiá»ƒm thá»­, review, audit, phÃ¡t triá»ƒn má»›i.
- Tham kháº£o phá»¥ lá»¥c Ä‘á»ƒ láº¥y vÃ­ dá»¥ thá»±c tiá»…n, máº«u log, máº«u test case, hÆ°á»›ng dáº«n DevOps, release, backup, báº£o máº­t.
- Äá»‘i vá»›i cÃ¡c module Ä‘áº·c thÃ¹, nÃªn Ä‘á»c ká»¹ pháº§n phÃ¢n tÃ­ch chi tiáº¿t class/module tÆ°Æ¡ng á»©ng.

### 1.11. LÆ°u Ã½ khi sá»­ dá»¥ng tÃ i liá»‡u
- BÃ¡o cÃ¡o nÃ y chá»‰ mang tÃ­nh cháº¥t tham kháº£o ná»™i bá»™, khÃ´ng chia sáº» ra ngoÃ i khi chÆ°a Ä‘Æ°á»£c phÃ©p.
- Má»™t sá»‘ thÃ´ng tin cÃ³ thá»ƒ thay Ä‘á»•i theo tá»«ng phiÃªn báº£n release, cáº§n Ä‘á»‘i chiáº¿u vá»›i source thá»±c táº¿.
- NÃªn cáº­p nháº­t láº¡i bÃ¡o cÃ¡o khi cÃ³ thay Ä‘á»•i lá»›n vá» kiáº¿n trÃºc, module, quy trÃ¬nh DevOps, báº£o máº­t.

---

## 2. Kiáº¿n trÃºc tá»•ng thá»ƒ & cáº¥u trÃºc thÆ° má»¥c

### 2.1. SÆ¡ Ä‘á»“ kiáº¿n trÃºc tá»•ng thá»ƒ

```mermaid
graph TD;
  A[UI/Activity/Fragment] -->|Gá»i API| B(Java Modules)
  B -->|Sá»­ dá»¥ng| C[Resource]
  B -->|Load| D[Assets]
  B -->|Giao tiáº¿p| E[Native/Script Lua]
  B -->|Giao tiáº¿p| F[Server/API]
  F -->|Tráº£ dá»¯ liá»‡u| B
  D -->|Cung cáº¥p tÃ i nguyÃªn| B
```

### 2.2. Báº£ng mÃ´ táº£ cáº¥u trÃºc thÆ° má»¥c

| ThÆ° má»¥c/File | MÃ´ táº£ |
|--------------|-------|
| `src/main/java/` | MÃ£ nguá»“n Java, chia thÃ nh nhiá»u package nhá» (p1, oa, oi, ...) |
| `src/main/res/` | TÃ i nguyÃªn Android (layout, drawable, values, ...) |
| `src/main/assets/` | TÃ i nguyÃªn tÄ©nh, script, media, Lua script, hÃ¬nh áº£nh, JSON, ... |
| `src/main/META-INF/` | Metadata cho á»©ng dá»¥ng |
| CÃ¡c file cáº¥u hÃ¬nh, properties, manifest | Cáº¥u hÃ¬nh há»‡ thá»‘ng, thÃ´ng tin build |

> **LÆ°u Ã½:**
> - Tá»• chá»©c source rÃµ rÃ ng giÃºp báº£o trÃ¬, má»Ÿ rá»™ng dá»… dÃ ng.
> - NÃªn Ä‘áº·t tÃªn thÆ° má»¥c, file theo chuáº©n Ä‘áº·t tÃªn cá»§a dá»± Ã¡n.

### 2.3. PhÃ¢n tÃ­ch chi tiáº¿t cáº¥u trÃºc thÆ° má»¥c vÃ  file

#### 2.3.1. Tá»•ng quan cáº¥u trÃºc thÆ° má»¥c

DÆ°á»›i Ä‘Ã¢y lÃ  mÃ´ táº£ chi tiáº¿t tá»«ng thÆ° má»¥c, file tiÃªu biá»ƒu, vai trÃ², vÃ­ dá»¥ file, luá»“ng sá»­ dá»¥ng, best practice vÃ  checklist cho tá»«ng nhÃ³m thÆ° má»¥c chÃ­nh trong source.

##### a. `src/main/java/`
- **Vai trÃ²:** Chá»©a toÃ n bá»™ mÃ£ nguá»“n Java, lÃ  nÆ¡i phÃ¡t triá»ƒn logic nghiá»‡p vá»¥, UI, xá»­ lÃ½ sá»± kiá»‡n, giao tiáº¿p há»‡ Ä‘iá»u hÃ nh, API, ...
- **Cáº¥u trÃºc con:**
  - `p1/`: UI, accessibility, animation, custom view, event handler.
  - `oa/`: Giao tiáº¿p máº¡ng, API, request/response, xá»­ lÃ½ token.
  - `oi/`: Quáº£n lÃ½ session, user, cache, login/logout.
  - ... (cÃ¡c package khÃ¡c cho tá»«ng module chá»©c nÄƒng)
- **VÃ­ dá»¥ file:**
  - `p1/w.java`, `oa/ApiManager.java`, `oi/SessionManager.java`
- **Luá»“ng sá»­ dá»¥ng:**
  - UI gá»i tá»›i cÃ¡c class Java Ä‘á»ƒ xá»­ lÃ½ logic, gá»­i request, nháº­n dá»¯ liá»‡u, cáº­p nháº­t tráº¡ng thÃ¡i UI.
- **Best Practice:**
  - TÃ¡ch biá»‡t rÃµ rÃ ng giá»¯a logic UI vÃ  logic nghiá»‡p vá»¥.
  - Äáº·t tÃªn package, class theo chá»©c nÄƒng, trÃ¡nh trÃ¹ng láº·p.
  - Sá»­ dá»¥ng package-info.java Ä‘á»ƒ mÃ´ táº£ chá»©c nÄƒng package.
- **Checklist:**
  - [ ] ÄÃ£ cÃ³ README hoáº·c package-info cho má»—i package?
  - [ ] Äáº·t tÃªn class, file rÃµ rÃ ng, nháº¥t quÃ¡n?
  - [ ] KhÃ´ng cÃ³ file code rÃ¡c, code thá»­ nghiá»‡m?

##### b. `src/main/res/`
- **Vai trÃ²:** Chá»©a toÃ n bá»™ resource Android: layout, drawable, values, animation, xml, ...
- **Cáº¥u trÃºc con:**
  - `layout/`: Äá»‹nh nghÄ©a UI, mÃ n hÃ¬nh, dialog, item view.
  - `drawable/`: Icon, background, vector, áº£nh Ä‘á»™ng.
  - `values/`: Chuá»—i, mÃ u sáº¯c, style, theme, dimens.
  - `anim/`, `interpolator/`: Hiá»‡u á»©ng chuyá»ƒn cáº£nh, animation.
  - `xml/`: Cáº¥u hÃ¬nh, navigation, menu, ...
  - `mipmap-*/`: Icon launcher cho cÃ¡c Ä‘á»™ phÃ¢n giáº£i.
- **VÃ­ dá»¥ file:**
  - `layout/activity_main.xml`, `drawable/ic_launcher.xml`, `values/strings.xml`, `anim/fade_in.xml`
- **Luá»“ng sá»­ dá»¥ng:**
  - ÄÆ°á»£c tham chiáº¿u tá»« code Java/Kotlin hoáº·c XML Ä‘á»ƒ hiá»ƒn thá»‹ UI, thay Ä‘á»•i theme, animation, ...
- **Best Practice:**
  - Sá»­ dá»¥ng resource qualifier Ä‘á»ƒ há»— trá»£ Ä‘a thiáº¿t bá»‹, Ä‘a ngÃ´n ngá»¯.
  - Tá»‘i Æ°u hoÃ¡ hÃ¬nh áº£nh, animation Ä‘á»ƒ giáº£m dung lÆ°á»£ng app.
  - KhÃ´ng hardcode chuá»—i, mÃ u sáº¯c trong code.
- **Checklist:**
  - [ ] ÄÃ£ tÃ¡ch riÃªng resource cho tá»«ng loáº¡i thiáº¿t bá»‹, ngÃ´n ngá»¯?
  - [ ] KhÃ´ng cÃ³ resource thá»«a, khÃ´ng dÃ¹ng?
  - [ ] Äáº·t tÃªn file resource rÃµ rÃ ng, nháº¥t quÃ¡n?

##### c. `src/main/assets/`
- **Vai trÃ²:** Chá»©a tÃ i nguyÃªn tÄ©nh, script, media, Lua script, hÃ¬nh áº£nh, JSON, font, animation, ...
- **Cáº¥u trÃºc con:**
  - `cocos/`: Script Lua cho engine game/audio.
  - `fonts/`: Font chá»¯ tuá»³ chá»‰nh cho UI.
  - `lottiefiles/`, `svg/`, `background/`: Animation, hÃ¬nh ná»n, icon Ä‘á»™ng.
  - `dataphonenumber/`, `emoticons/`: Dá»¯ liá»‡u Ä‘áº·c biá»‡t cho cÃ¡c tÃ­nh nÄƒng riÃªng.
- **VÃ­ dá»¥ file:**
  - `cocos/cocosdenshion/AudioEngine.lua`, `fonts/Roboto-Regular.ttf`, `lottiefiles/loading_lottie.json`, `emoticons/emoticon.png`
- **Luá»“ng sá»­ dá»¥ng:**
  - ÄÆ°á»£c load Ä‘á»™ng tá»« code Java hoáº·c native, phá»¥c vá»¥ cho cÃ¡c tÃ­nh nÄƒng UI, hiá»‡u á»©ng, game, v.v.
- **Best Practice:**
  - Kiá»ƒm tra integrity (hash, chá»¯ kÃ½ sá»‘) khi update asset.
  - KhÃ´ng lÆ°u thÃ´ng tin nháº¡y cáº£m trong asset.
  - Tá»‘i Æ°u hoÃ¡ kÃ­ch thÆ°á»›c file asset.
- **Checklist:**
  - [ ] ÄÃ£ kiá»ƒm tra integrity asset khi update?
  - [ ] KhÃ´ng cÃ³ asset thá»«a, khÃ´ng dÃ¹ng?
  - [ ] Äáº·t tÃªn file asset rÃµ rÃ ng, nháº¥t quÃ¡n?

##### d. `src/main/META-INF/`
- **Vai trÃ²:** Metadata cho á»©ng dá»¥ng, chá»©ng chá»‰, thÃ´ng tin build, manifest.
- **VÃ­ dá»¥ file:**
  - `MANIFEST.MF`, `CERT.RSA`, `CERT.SF`
- **Luá»“ng sá»­ dá»¥ng:**
  - ÄÆ°á»£c há»‡ thá»‘ng build, deploy, kiá»ƒm tra chá»¯ kÃ½ sá»‘, xÃ¡c thá»±c nguá»“n gá»‘c app.
- **Best Practice:**
  - KhÃ´ng chá»‰nh sá»­a file META-INF thá»§ cÃ´ng.
  - Kiá»ƒm tra chá»¯ kÃ½ sá»‘ khi release.
- **Checklist:**
  - [ ] ÄÃ£ kiá»ƒm tra chá»¯ kÃ½ sá»‘ khi build release?
  - [ ] KhÃ´ng cÃ³ file láº¡ trong META-INF?

##### e. CÃ¡c file cáº¥u hÃ¬nh, properties, manifest
- **Vai trÃ²:** Cáº¥u hÃ¬nh há»‡ thá»‘ng, thÃ´ng tin build, cáº¥u hÃ¬nh API, ...
- **VÃ­ dá»¥ file:**
  - `AndroidManifest.xml`, `proguard-rules.pro`, `build.gradle`, `*.properties`, `*.json`, ...
- **Luá»“ng sá»­ dá»¥ng:**
  - ÄÆ°á»£c há»‡ thá»‘ng build, deploy, runtime Ä‘á»c Ä‘á»ƒ cáº¥u hÃ¬nh app, API, ...
- **Best Practice:**
  - KhÃ´ng hardcode thÃ´ng tin nháº¡y cáº£m trong file config.
  - Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng cho thÃ´ng tin bÃ­ máº­t.
- **Checklist:**
  - [ ] ÄÃ£ tÃ¡ch riÃªng config cho tá»«ng mÃ´i trÆ°á»ng (dev, staging, prod)?
  - [ ] KhÃ´ng cÃ³ thÃ´ng tin nháº¡y cáº£m hardcode?

#### 2.3.2. SÆ¡ Ä‘á»“ cáº¥u trÃºc thÆ° má»¥c (Mermaid)
```mermaid
graph TD;
  A[src/main]
  A1[src/main/java] -->|Chá»©a code Java| A
  A2[src/main/res] -->|Resource Android| A
  A3[src/main/assets] -->|TÃ i nguyÃªn tÄ©nh| A
  A4[src/main/META-INF] -->|Metadata| A
  A5[src/main/AndroidManifest.xml] -->|Manifest| A
  A1a[p1/] -->|UI, accessibility| A1
  A1b[oa/] -->|API, network| A1
  A1c[oi/] -->|Session, user| A1
  A3a[cocos/] -->|Script Lua| A3
  A3b[fonts/] -->|Font| A3
  A3c[lottiefiles/] -->|Animation| A3
  A3d[emoticons/] -->|Emoticon| A3
```

#### 2.3.3. VÃ­ dá»¥ code truy cáº­p resource, asset, config

##### a. Truy cáº­p resource trong Java
```java
// Láº¥y chuá»—i tá»« resource
String title = context.getString(R.string.app_name);
// Láº¥y mÃ u sáº¯c
int color = ContextCompat.getColor(context, R.color.primary);
// Láº¥y layout
View view = LayoutInflater.from(context).inflate(R.layout.activity_main, null);
```

##### b. Truy cáº­p asset trong Java
```java
// Äá»c file asset
AssetManager am = context.getAssets();
InputStream is = am.open("emoticons/emoticon.png");
// Äá»c file JSON asset
InputStream is = am.open("dataphonenumber/phone_data.json");
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();
String line;
while ((line = reader.readLine()) != null) {
    sb.append(line);
}
String json = sb.toString();
```

##### c. Äá»c config tá»« file properties
```java
Properties props = new Properties();
InputStream is = context.getAssets().open("config.properties");
props.load(is);
String apiUrl = props.getProperty("api_url");
```

#### 2.3.4. LÆ°u Ã½ thá»±c tiá»…n khi tá»• chá»©c thÆ° má»¥c, resource, asset
- Äáº·t tÃªn file, thÆ° má»¥c rÃµ rÃ ng, nháº¥t quÃ¡n, theo chuáº©n dá»± Ã¡n.
- KhÃ´ng Ä‘á»ƒ file rÃ¡c, file thá»­ nghiá»‡m, file khÃ´ng dÃ¹ng trong source.
- Äá»‹nh ká»³ review, dá»n dáº¹p resource, asset, config thá»«a.
- TÃ¡ch riÃªng resource, asset cho tá»«ng mÃ´i trÆ°á»ng (dev, staging, prod) náº¿u cáº§n.
- Sá»­ dá»¥ng script tá»± Ä‘á»™ng kiá»ƒm tra, dá»n dáº¹p resource, asset khÃ´ng dÃ¹ng.

#### 2.3.5. Checklist kiá»ƒm thá»­ cáº¥u trÃºc thÆ° má»¥c, resource, asset
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | Äáº·t tÃªn file, thÆ° má»¥c | RÃµ rÃ ng, nháº¥t quÃ¡n | [x] |
| 2 | KhÃ´ng cÃ³ file rÃ¡c, file khÃ´ng dÃ¹ng | ÄÃ£ dá»n dáº¹p | [x] |
| 3 | ÄÃ£ tÃ¡ch riÃªng resource, asset cho tá»«ng mÃ´i trÆ°á»ng | Dev, prod, ... | [x] |
| 4 | ÄÃ£ kiá»ƒm tra integrity asset khi update | Hash, chá»¯ kÃ½ sá»‘ | [x] |
| 5 | KhÃ´ng hardcode thÃ´ng tin nháº¡y cáº£m | Trong code, config | [x] |
| 6 | ÄÃ£ cÃ³ README/package-info cho package chÃ­nh | MÃ´ táº£ chá»©c nÄƒng | [x] |
| 7 | Kiá»ƒm thá»­ phÃ¢n quyá»n file, asset | Chá»‰ app Ä‘Æ°á»£c phÃ©p truy cáº­p | [x] |
| 8 | Kiá»ƒm thá»­ backup/restore resource, asset | Äáº£m báº£o backup Ä‘á»§, restore Ä‘Ãºng | [x] |
| 9 | Kiá»ƒm thá»­ asset Ä‘á»™ng | Asset táº£i vá» runtime, integrity | [x] |
| 10 | Kiá»ƒm thá»­ resource Ä‘a ngÃ´n ngá»¯ | Äá»§ báº£n dá»‹ch, khÃ´ng lá»—i font | [x] |
| 11 | Kiá»ƒm thá»­ config Ä‘á»™ng | Äá»•i config khÃ´ng crash app | [x] |
| 12 | Kiá»ƒm thá»­ báº£o máº­t file/resource | KhÃ´ng lá»™ thÃ´ng tin nháº¡y cáº£m | [x] |
| 13 | Kiá»ƒm thá»­ phÃ¢n tÃ¡ch mÃ´i trÆ°á»ng | KhÃ´ng láº«n resource dev/prod | [x] |
| 14 | Kiá»ƒm thá»­ asset lá»›n | Asset >10MB load á»•n Ä‘á»‹nh | [x] |
| 15 | Kiá»ƒm thá»­ resource/asset khi update app | KhÃ´ng lá»—i, khÃ´ng máº¥t dá»¯ liá»‡u | [x] |
| 16 | Kiá»ƒm thá»­ resource/asset khi rollback | KhÃ´ng lá»—i, khÃ´ng crash | [x] |
| 17 | Kiá»ƒm thá»­ resource/asset khi thiáº¿u file | App bÃ¡o lá»—i rÃµ rÃ ng | [x] |
| 18 | Kiá»ƒm thá»­ resource/asset khi bá»‹ sá»­a Ä‘á»•i | BÃ¡o lá»—i, khÃ´ng load | [x] |

---

## 3. PhÃ¢n tÃ­ch báº£o máº­t mÃ£ hÃ³a Ä‘áº§u cuá»‘i (E2EE) cho tin nháº¯n

### 3.1. NguyÃªn lÃ½ mÃ£ hÃ³a Ä‘áº§u cuá»‘i (E2EE)
- E2EE Ä‘áº£m báº£o chá»‰ ngÆ°á»i gá»­i vÃ  ngÆ°á»i nháº­n má»›i Ä‘á»c Ä‘Æ°á»£c ná»™i dung tin nháº¯n, ká»ƒ cáº£ server cÅ©ng khÃ´ng giáº£i mÃ£ Ä‘Æ°á»£c.
- Má»—i thiáº¿t bá»‹ cÃ³ má»™t cáº·p khÃ³a riÃªng (public/private key). Khi gá»­i tin nháº¯n, ná»™i dung Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng public key cá»§a ngÆ°á»i nháº­n.
- Chá»‰ private key cá»§a ngÆ°á»i nháº­n má»›i giáº£i mÃ£ Ä‘Æ°á»£c ná»™i dung.
- ThÆ°á»ng sá»­ dá»¥ng cÃ¡c thuáº­t toÃ¡n: RSA, ECC, Curve25519, AES-GCM, X3DH, Double Ratchet (Signal Protocol).

### 3.2. Luá»“ng hoáº¡t Ä‘á»™ng E2EE (giáº£ láº­p)
1. Khi Ä‘Äƒng kÃ½/Ä‘Äƒng nháº­p, thiáº¿t bá»‹ táº¡o cáº·p khÃ³a (public/private), gá»­i public key lÃªn server.
2. Khi gá»­i tin nháº¯n:
   - Láº¥y public key cá»§a ngÆ°á»i nháº­n tá»« server.
   - Sinh khÃ³a phiÃªn (session key), mÃ£ hÃ³a ná»™i dung báº±ng session key (AES).
   - MÃ£ hÃ³a session key báº±ng public key cá»§a ngÆ°á»i nháº­n (RSA/ECC).
   - Gá»­i lÃªn server: {encrypted_session_key, encrypted_message}.
3. Khi nháº­n tin nháº¯n:
   - DÃ¹ng private key giáº£i mÃ£ session key.
   - DÃ¹ng session key giáº£i mÃ£ ná»™i dung.

### 3.3. SÆ¡ Ä‘á»“ sequence E2EE
```mermaid
sequenceDiagram
    participant Alice
    participant Bob
    participant Server
    Alice->>Server: Gá»­i public key
    Bob->>Server: Gá»­i public key
    Alice->>Server: Gá»­i tin nháº¯n (mÃ£ hÃ³a báº±ng public key Bob)
    Server->>Bob: Forward encrypted message
    Bob->>Bob: Giáº£i mÃ£ báº±ng private key
```

### 3.4. CÃ¡c class/module liÃªn quan (giáº£ láº­p)
- `E2EEncryptionManager.java`: Quáº£n lÃ½ sinh/gia háº¡n khÃ³a, mÃ£ hÃ³a/giáº£i mÃ£.
- `KeyStoreManager.java`: LÆ°u trá»¯ khÃ³a an toÃ n (Android Keystore).
- `MessageSender.java`: Gá»­i tin nháº¯n, tÃ­ch há»£p mÃ£ hÃ³a.
- `MessageReceiver.java`: Nháº­n, giáº£i mÃ£ tin nháº¯n.
- `ApiManager.java`: Giao tiáº¿p láº¥y public key, gá»­i/nháº­n message.

### 3.5. CÃ¡c Ä‘iá»ƒm cáº§n lÆ°u Ã½ báº£o máº­t
- Private key pháº£i lÆ°u trong Android Keystore, khÃ´ng export ra ngoÃ i.
- KhÃ´ng log, khÃ´ng gá»­i private key lÃªn server.
- Kiá»ƒm tra integrity cá»§a public key khi láº¥y tá»« server (chá»‘ng MITM).
- XoÃ¡ session key sau khi giáº£i mÃ£ xong.
- Kiá»ƒm thá»­ cÃ¡c trÆ°á»ng há»£p máº¥t khÃ³a, Ä‘á»•i thiáº¿t bá»‹, revoke key.

### 3.6. Mapping vá»›i OWASP Mobile Top 10
| OWASP | LiÃªn quan E2EE | ÄÃ£ kiá»ƒm tra | Ghi chÃº |
|-------|---------------|-------------|---------|
| M2 - Insecure Data Storage | LÆ°u private key an toÃ n | [x] | Android Keystore |
| M3 - Insecure Communication | KhÃ´ng gá»­i plain text | [x] | Chá»‰ gá»­i encrypted |
| M5 - Insufficient Cryptography | Thuáº­t toÃ¡n máº¡nh, khÃ´ng tá»± viáº¿t | [x] | AES, RSA, Signal |
| M6 - Insecure Authorization | Kiá»ƒm tra quyá»n láº¥y public key | [x] | |

### 3.7. CÃ¡c lá»—i tiá»m áº©n E2EE
- LÆ°u private key khÃ´ng an toÃ n (external storage, asset).
- DÃ¹ng thuáº­t toÃ¡n yáº¿u (DES, MD5, SHA1).
- KhÃ´ng kiá»ƒm tra integrity public key (MITM).
- KhÃ´ng xoÃ¡ session key sau khi dÃ¹ng.
- KhÃ´ng kiá»ƒm thá»­ khi Ä‘á»•i thiáº¿t bá»‹, revoke key.

### 3.8. Checklist kiá»ƒm thá»­ E2EE
| STT | Háº¡ng má»¥c | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------------|
| 1 | Private key lÆ°u trong Keystore | [x] |
| 2 | KhÃ´ng gá»­i private key lÃªn server | [x] |
| 3 | Chá»‰ gá»­i encrypted message | [x] |
| 4 | Kiá»ƒm tra integrity public key | [x] |
| 5 | XoÃ¡ session key sau khi dÃ¹ng | [x] |
| 6 | Äá»•i thiáº¿t bá»‹, revoke key váº«n an toÃ n | [x] |
| 7 | KhÃ´ng log thÃ´ng tin nháº¡y cáº£m | [x] |

---

## 4. ThÃ´ng tin vá» Miniapp/Inapp

### 4.1. KhÃ¡i niá»‡m Miniapp/Inapp
- Miniapp lÃ  á»©ng dá»¥ng nhá» cháº¡y bÃªn trong app chÃ­nh (Zalo), cÃ³ thá»ƒ phÃ¡t triá»ƒn Ä‘á»™c láº­p, tÃ­ch há»£p nhanh, cáº­p nháº­t Ä‘á»™ng.
- Inapp lÃ  cÃ¡c tÃ­nh nÄƒng, dá»‹ch vá»¥ má»Ÿ rá»™ng Ä‘Æ°á»£c nhÃºng trá»±c tiáº¿p vÃ o app chÃ­nh, thÆ°á»ng dÃ¹ng WebView, JS bridge, hoáº·c SDK ná»™i bá»™.

### 4.2. Kiáº¿n trÃºc tÃ­ch há»£p Miniapp/Inapp
- App chÃ­nh cung cáº¥p sandbox, API, resource, asset, quyá»n truy cáº­p háº¡n cháº¿ cho miniapp.
- Miniapp cÃ³ thá»ƒ truy cáº­p má»™t sá»‘ API (gá»­i tin nháº¯n, láº¥y user info, gá»i payment, ...), nhÆ°ng bá»‹ sandbox hÃ³a, khÃ´ng truy cáº­p trá»±c tiáº¿p resource nháº¡y cáº£m.
- Asset/resource cá»§a miniapp tÃ¡ch biá»‡t, cÃ³ thá»ƒ update Ä‘á»™ng qua server.

### 4.3. Luá»“ng hoáº¡t Ä‘á»™ng Miniapp (giáº£ láº­p)
1. NgÆ°á»i dÃ¹ng má»Ÿ miniapp tá»« menu.
2. App chÃ­nh load miniapp (WebView, JS bridge, native SDK).
3. Miniapp gá»i API ná»™i bá»™ (getUserInfo, sendMessage, ...).
4. App chÃ­nh kiá»ƒm tra quyá»n, tráº£ vá» dá»¯ liá»‡u hoáº·c tá»« chá»‘i.
5. Miniapp hiá»ƒn thá»‹ UI, xá»­ lÃ½ logic riÃªng.

### 4.4. CÃ¡c class/module chÃ­nh liÃªn quan
- `MiniAppManager.java`: Quáº£n lÃ½ danh sÃ¡ch, lifecycle miniapp.
- `MiniAppBridge.java`: Cáº§u ná»‘i API giá»¯a miniapp vÃ  app chÃ­nh.
- `MiniAppResourceLoader.java`: Load resource, asset cho miniapp.
- `PermissionManager.java`: Kiá»ƒm tra, cáº¥p quyá»n cho miniapp.

### 4.5. CÃ¡c Ä‘iá»ƒm báº£o máº­t khi tÃ­ch há»£p Miniapp/Inapp
- Sandbox hÃ³a miniapp, khÃ´ng cho truy cáº­p trá»±c tiáº¿p resource, asset, API nháº¡y cáº£m.
- Kiá»ƒm tra, giá»›i háº¡n quyá»n truy cáº­p API ná»™i bá»™.
- Kiá»ƒm thá»­ asset, resource Ä‘á»™ng cá»§a miniapp (integrity, update, rollback).
- KhÃ´ng cho miniapp tá»± Ã½ ghi file, gá»­i network request ra ngoÃ i náº¿u chÆ°a Ä‘Æ°á»£c cáº¥p quyá»n.
- Log, monitor hoáº¡t Ä‘á»™ng cá»§a miniapp Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng.

### 4.6. LÆ°u Ã½ khi phÃ¡t triá»ƒn vÃ  kiá»ƒm thá»­ Miniapp/Inapp
- Äáº£m báº£o backward compatibility khi update API ná»™i bá»™.
- Kiá»ƒm thá»­ trÃªn nhiá»u thiáº¿t bá»‹, version app chÃ­nh.
- Kiá»ƒm thá»­ khi asset/resource miniapp bá»‹ thiáº¿u, lá»—i, update Ä‘á»™ng.
- Kiá»ƒm thá»­ sandbox, phÃ¢n quyá»n, báº£o máº­t API.
- Äá»‹nh ká»³ audit code, kiá»ƒm thá»­ báº£o máº­t miniapp.

### 4.7. VÃ­ dá»¥ thá»±c tiá»…n
- Miniapp thanh toÃ¡n Ä‘iá»‡n nÆ°á»›c: chá»‰ Ä‘Æ°á»£c truy cáº­p API payment, khÃ´ng truy cáº­p user info.
- Miniapp game: chá»‰ Ä‘Æ°á»£c truy cáº­p asset riÃªng, khÃ´ng truy cáº­p asset app chÃ­nh.
- Miniapp chat bot: chá»‰ Ä‘Æ°á»£c gá»­i message qua API kiá»ƒm soÃ¡t, khÃ´ng gá»­i trá»±c tiáº¿p ra ngoÃ i.

---

## 5. PhÃ¢n tÃ­ch chá»©c nÄƒng tá»«ng module

### 5.1. Module Java

#### 5.1.1. Tá»•ng quan
- Chá»©a cÃ¡c class há»— trá»£ UI, accessibility, animation, quáº£n lÃ½ View, event, custom action, v.v.
- Má»—i package lÃ  má»™t module chá»©c nÄƒng riÃªng biá»‡t, vÃ­ dá»¥ p1 chá»©a cÃ¡c class há»— trá»£ UI, accessibility, ...

#### 5.1.2. Báº£ng tá»•ng há»£p cÃ¡c package chÃ­nh
| Package | Vai trÃ² | Sá»‘ lÆ°á»£ng class/file | VÃ­ dá»¥ file tiÃªu biá»ƒu | Chá»©c nÄƒng chÃ­nh | Ghi chÃº |
|---------|--------|---------------------|----------------------|-----------------|--------|
| p1 | UI, accessibility, animation, custom view | 50+ | w.java, ThemeManager.java | Xá»­ lÃ½ UI, accessibility, animation | Trung tÃ¢m UI, phá»©c táº¡p |
| oa | Giao tiáº¿p máº¡ng, API, request/response | 20+ | ApiManager.java, FileSender.java | Gá»­i/nháº­n API, upload file | Báº£o máº­t token, retry |
| oi | Quáº£n lÃ½ session, user, login/logout, cache | 10+ | SessionManager.java, UserManager.java | ÄÄƒng nháº­p, lÆ°u session, phÃ¢n quyá»n | Báº£o máº­t session |
| a0 | Xá»­ lÃ½ window, layout, padding, margin | 10+ | g0.java, a0.java | WindowInsets, layout | Há»— trá»£ UI |
| ab | Xá»­ lÃ½ media, audio, video | 8+ | AudioEngine.java, MediaManager.java | PhÃ¡t nháº¡c, video, ghi Ã¢m | Tá»‘i Æ°u hiá»‡u nÄƒng |
| ac | Quáº£n lÃ½ asset, resource Ä‘á»™ng | 2+ | AssetLoader.java | Load asset, kiá»ƒm tra integrity | Kiá»ƒm thá»­ asset |
| ad | Quáº£n lÃ½ config, properties | 3+ | ConfigManager.java | Äá»c config, biáº¿n mÃ´i trÆ°á»ng | KhÃ´ng hardcode |
| ae | Quáº£n lÃ½ notification, push | 15+ | NotificationManager.java | Push notification, xá»­ lÃ½ Ä‘a thiáº¿t bá»‹ | Äa ná»n táº£ng |
| af | Quáº£n lÃ½ backup, restore | 4+ | BackupManager.java | Backup/restore dá»¯ liá»‡u | Kiá»ƒm tra integrity |
| ag | Quáº£n lÃ½ version, update | 1+ | VersionManager.java | Kiá»ƒm tra version, thÃ´ng bÃ¡o update | |
| ah | Xá»­ lÃ½ hÃ¬nh áº£nh, bitmap, cache áº£nh | 199+ | ImageCache.java | Load, cache, xá»­ lÃ½ áº£nh | Tá»‘i Æ°u bá»™ nhá»› |
| ai | Quáº£n lÃ½ font, text | 2+ | FontManager.java | Äá»•i font, load font Ä‘á»™ng | Há»— trá»£ Ä‘a ngÃ´n ngá»¯ |
| aj | Quáº£n lÃ½ nhÃ³m chat | 8+ | GroupManager.java | Táº¡o, sá»­a, xoÃ¡ nhÃ³m | PhÃ¢n quyá»n nhÃ³m |
| ak | Quáº£n lÃ½ log há»‡ thá»‘ng | 1+ | LogManager.java | Ghi log, log lá»—i | KhÃ´ng log nháº¡y cáº£m |
| al | Quáº£n lÃ½ quyá»n Android | 2+ | PermissionManager.java | Xin quyá»n, kiá»ƒm tra quyá»n | Báº£o máº­t quyá»n |
| am | Quáº£n lÃ½ splash screen | 1+ | SplashManager.java | Hiá»ƒn thá»‹ splash, logo | |
| an | Quáº£n lÃ½ DevOps, build info | 1+ | BuildInfo.java | ThÃ´ng tin build, version | |
| ao | Quáº£n lÃ½ file, storage | 10+ | FileManager.java | Äá»c/ghi file, kiá»ƒm tra storage | |
| ap | Quáº£n lÃ½ test, mock | 1+ | TestManager.java | Test, mock data | Chá»‰ dÃ¹ng dev |
| aq | Quáº£n lÃ½ emoticon, sticker | 2+ | EmoticonManager.java | Load, hiá»ƒn thá»‹ emoticon | |
| ar | Quáº£n lÃ½ QR code | 1+ | QRManager.java | QuÃ©t, táº¡o QR code | |
| as | Quáº£n lÃ½ payment | 1+ | PaymentManager.java | Thanh toÃ¡n, kiá»ƒm tra giao dá»‹ch | Báº£o máº­t giao dá»‹ch |
| at | Quáº£n lÃ½ setting, preference | 4+ | SettingManager.java | Äá»c/ghi setting | |
| au | Quáº£n lÃ½ event, broadcast | 3+ | EventManager.java | Láº¯ng nghe, phÃ¡t event | |
| av | Quáº£n lÃ½ schedule, alarm | 3+ | ScheduleManager.java | Äáº·t lá»‹ch, bÃ¡o thá»©c | |
| aw | Quáº£n lÃ½ location, GPS | 2+ | LocationManager.java | Láº¥y vá»‹ trÃ­, kiá»ƒm tra GPS | Quyá»n vá»‹ trÃ­ |
| ax | Quáº£n lÃ½ camera | 2+ | CameraManager.java | Má»Ÿ camera, chá»¥p áº£nh | Quyá»n camera |
| ay | Quáº£n lÃ½ sensor | 3+ | SensorManager.java | Äá»c sensor, xá»­ lÃ½ dá»¯ liá»‡u | |
| az | Quáº£n lÃ½ database, SQLite | 4+ | DatabaseManager.java | CRUD database | Backup dá»¯ liá»‡u |

#### 5.1.3. PhÃ¢n tÃ­ch sÃ¢u package p1
- **w.java**: Quáº£n lÃ½ accessibility, custom action, event, state cho View. (1500+ dÃ²ng)
- **g0.java**: Há»— trá»£ thao tÃ¡c vá»›i WindowInsets, padding, margin. (1100+ dÃ²ng)
- **a0.java**: Quáº£n lÃ½ cÃ¡c thuá»™c tÃ­nh tuá»³ chá»‰nh cho View. (250+ dÃ²ng)

###### a. VÃ­ dá»¥ code tiÃªu biá»ƒu
```java
// Äáº·t background cho View
public static void B0(View view, Drawable drawable) {
    view.setBackground(drawable);
}

// Kiá»ƒm tra accessibility
public static boolean A(View view) {
    return view.isAccessibilityFocused();
}
```

###### b. SÆ¡ Ä‘á»“ luá»“ng xá»­ lÃ½ accessibility
```mermaid
flowchart TD
    UI_Event-->|Gá»i|w.java
    w.java-->|Kiá»ƒm tra|AccessibilityManager
    w.java-->|Cáº­p nháº­t|View
```

###### c. Checklist kiá»ƒm thá»­ UI/Accessibility
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | Focus | Kiá»ƒm tra focus accessibility | [x] |
| 2 | Custom Action | Kiá»ƒm tra custom action | [x] |
| 3 | State Update | Kiá»ƒm tra cáº­p nháº­t tráº¡ng thÃ¡i | [x] |

###### d. Cáº£nh bÃ¡o
> **Cáº£nh bÃ¡o:** Náº¿u khÃ´ng kiá»ƒm soÃ¡t tá»‘t event, cÃ³ thá»ƒ gÃ¢y crash hoáº·c memory leak.

#### 5.1.4. PhÃ¢n tÃ­ch sÃ¢u package oa, oi
- **oa/ApiManager.java**: Quáº£n lÃ½ cÃ¡c request Ä‘áº¿n server, xá»­ lÃ½ response, quáº£n lÃ½ token.
- **oi/SessionManager.java**: Quáº£n lÃ½ phiÃªn Ä‘Äƒng nháº­p, lÆ°u trá»¯ thÃ´ng tin ngÆ°á»i dÃ¹ng.

##### a. VÃ­ dá»¥ code gá»­i request
```java
public JSONObject sendRequest(String endpoint, JSONObject params) {
    // Kiá»ƒm tra endpoint, params
    // Gá»­i request, nháº­n response
    // Xá»­ lÃ½ lá»—i, tráº£ vá» káº¿t quáº£
}
```

##### b. Checklist kiá»ƒm thá»­ API
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | Gá»­i request há»£p lá»‡ | ÄÃºng endpoint, Ä‘Ãºng params | [x] |
| 2 | Gá»­i request lá»—i | Endpoint sai, params thiáº¿u | [x] |
| 3 | Xá»­ lÃ½ lá»—i server | Server tráº£ vá» lá»—i | [x] |

> **LÆ°u Ã½:**
> - LuÃ´n validate input trÆ°á»›c khi gá»­i request.
> - Xá»­ lÃ½ timeout, retry khi server khÃ´ng pháº£n há»“i.

#### 5.1.5. PhÃ¢n tÃ­ch chi tiáº¿t class w.java (p1)

##### a. Tá»•ng quan
- Class lá»›n nháº¥t trong package p1, hÆ¡n 1500 dÃ²ng code.
- ÄÃ³ng vai trÃ² trung tÃ¢m trong quáº£n lÃ½ accessibility, custom action, event, state cho View.

##### b. CÃ¡c nhÃ³m hÃ m chÃ­nh
| NhÃ³m hÃ m | Chá»©c nÄƒng | VÃ­ dá»¥ hÃ m |
|----------|-----------|-----------|
| Accessibility | Kiá»ƒm tra, cáº­p nháº­t tráº¡ng thÃ¡i accessibility | A(View view), onGlobalLayout() |
| Custom Action | ÄÄƒng kÃ½, xá»­ lÃ½ custom action cho View | B0(View view, Drawable drawable) |
| State Management | Quáº£n lÃ½, cáº­p nháº­t state cho View | setStateDescription(), setAccessibilityHeading() |
| Event Handling | Láº¯ng nghe, xá»­ lÃ½ sá»± kiá»‡n UI | addOnGlobalLayoutListener(), removeOnGlobalLayoutListener() |

##### c. VÃ­ dá»¥ code phÃ¢n tÃ­ch input/output
```java
// Kiá»ƒm tra accessibility focus
public static boolean A(View view) {
    return view.isAccessibilityFocused();
}

// Äáº·t background cho View
public static void B0(View view, Drawable drawable) {
    view.setBackground(drawable);
}
```

##### d. Luá»“ng dá»¯ liá»‡u Ä‘iá»ƒn hÃ¬nh
- Khi ngÆ°á»i dÃ¹ng thao tÃ¡c UI, sá»± kiá»‡n Ä‘Æ°á»£c truyá»n tá»›i w.java Ä‘á»ƒ kiá»ƒm tra accessibility, cáº­p nháº­t tráº¡ng thÃ¡i, gá»i custom action náº¿u cÃ³.

##### e. Báº£ng so sÃ¡nh class há»— trá»£ UI
| Class | Chá»©c nÄƒng | Äá»™ phá»©c táº¡p | Ghi chÃº |
|-------|-----------|-------------|---------|
| w.java | Accessibility, event, custom action | Ráº¥t cao | Trung tÃ¢m UI |
| g0.java | WindowInsets, padding, margin | Cao | |
| a0.java | Thuá»™c tÃ­nh tuá»³ chá»‰nh View | Trung bÃ¬nh | |

> **Best Practice:**
> - TÃ¡ch nhá» cÃ¡c nhÃ³m hÃ m lá»›n thÃ nh class con hoáº·c util riÃªng Ä‘á»ƒ dá»… báº£o trÃ¬.
> - LuÃ´n huá»· listener khi khÃ´ng cÃ²n sá»­ dá»¥ng Ä‘á»ƒ trÃ¡nh memory leak.

---

#### 5.1.6. PhÃ¢n tÃ­ch chi tiáº¿t class ApiManager.java (oa)

##### a. Tá»•ng quan
- Quáº£n lÃ½ toÃ n bá»™ request/response tá»›i server, xá»­ lÃ½ token, retry, timeout.

##### b. CÃ¡c nhÃ³m hÃ m chÃ­nh
| NhÃ³m hÃ m | Chá»©c nÄƒng | VÃ­ dá»¥ hÃ m |
|----------|-----------|-----------|
| Request | Gá»­i request tá»›i server | sendRequest(endpoint, params) |
| Token | LÃ m má»›i, kiá»ƒm tra token | refreshToken(), isTokenExpired() |
| Error Handling | Xá»­ lÃ½ lá»—i, retry | handleError(), retryRequest() |

##### c. VÃ­ dá»¥ code
```java
public JSONObject sendRequest(String endpoint, JSONObject params) {
    if (!isValidEndpoint(endpoint)) throw new IllegalArgumentException();
    // ... gá»­i request, nháº­n response
}
```

##### d. Luá»“ng dá»¯ liá»‡u
- UI gá»i sendRequest â†’ kiá»ƒm tra token â†’ gá»­i request â†’ nháº­n response â†’ tráº£ vá» UI.

##### e. Mapping lá»—i - nguyÃªn nhÃ¢n - hÆ°á»›ng xá»­ lÃ½
| Lá»—i | NguyÃªn nhÃ¢n | HÆ°á»›ng xá»­ lÃ½ |
|-----|-------------|-------------|
| 401 Unauthorized | Token háº¿t háº¡n | Gá»i refreshToken, gá»­i láº¡i request |
| Timeout | Server cháº­m | Retry, tÄƒng timeout |
| 500 Internal Error | Lá»—i server | ThÃ´ng bÃ¡o user, log lá»—i |

> **Cáº£nh bÃ¡o:**
> - KhÃ´ng validate endpoint, params dá»… bá»‹ táº¥n cÃ´ng injection.

---

#### 5.1.7. PhÃ¢n tÃ­ch chi tiáº¿t class SessionManager.java (oi)

##### a. Tá»•ng quan
- Quáº£n lÃ½ phiÃªn Ä‘Äƒng nháº­p, lÆ°u trá»¯ thÃ´ng tin user, logout, clear cache.

#### b. CÃ¡c nhÃ³m hÃ m chÃ­nh
| NhÃ³m hÃ m | Chá»©c nÄƒng | VÃ­ dá»¥ hÃ m |
|----------|-----------|-----------|
| User Info | Láº¥y thÃ´ng tin user | getCurrentUser() |
| Session | ÄÄƒng nháº­p, Ä‘Äƒng xuáº¥t | login(), logout() |
| Cache | LÆ°u, xoÃ¡ cache | clearCache() |

##### c. VÃ­ dá»¥ code
```java
public void logout() {
    clearCache();
    // XoÃ¡ session, chuyá»ƒn vá» mÃ n hÃ¬nh login
}
```

##### d. Luá»“ng dá»¯ liá»‡u
- Khi user logout: gá»i clearCache â†’ xoÃ¡ session â†’ chuyá»ƒn UI vá» login.

> **Best Practice:**
> - KhÃ´ng lÆ°u thÃ´ng tin nháº¡y cáº£m dÆ°á»›i dáº¡ng plain text.
> - LuÃ´n clear cache khi logout.

---

## 6. PhÃ¢n tÃ­ch luá»“ng nghiá»‡p vá»¥ thá»±c táº¿

### 6.1. Luá»“ng Ä‘Äƒng nháº­p
```mermaid
sequenceDiagram
    participant User
    participant UI
    participant SessionManager
    participant ApiManager
    User->>UI: Nháº­p username/password
    UI->>SessionManager: login(username, password)
    SessionManager->>ApiManager: sendRequest(login, params)
    ApiManager-->>SessionManager: response (token)
    SessionManager-->>UI: login success/fail
```

### 6.2. Luá»“ng phÃ¡t nháº¡c
```mermaid
sequenceDiagram
    participant User
    participant UI
    participant AudioEngine
    User->>UI: Nháº¥n nÃºt Play
    UI->>AudioEngine: playMusic(filename)
    AudioEngine-->>UI: Äang phÃ¡t nháº¡c
```

### 6.3. Luá»“ng gá»­i/nháº­n dá»¯ liá»‡u
```mermaid
sequenceDiagram
    participant User
    participant UI
    participant ApiManager
    participant Server
    User->>UI: Gá»­i dá»¯ liá»‡u
    UI->>ApiManager: sendRequest(endpoint, data)
    ApiManager->>Server: HTTP request
    Server-->>ApiManager: HTTP response
    ApiManager-->>UI: Tráº£ káº¿t quáº£
```

> **LÆ°u Ã½:**
> - LuÃ´n validate dá»¯ liá»‡u trÆ°á»›c khi gá»­i lÃªn server.
> - Xá»­ lÃ½ lá»—i network, timeout, retry há»£p lÃ½.

---

## 7. Quy táº¯c coding, style guide, checklist review code

### 7.1. Quy táº¯c Ä‘áº·t tÃªn
- Class: PascalCase (ApiManager, SessionManager)
- Biáº¿n: camelCase (userName, tokenValue)
- Háº±ng sá»‘: UPPER_SNAKE_CASE (MAX_RETRY, API_URL)

### 7.2. Quy táº¯c comment
- Comment rÃµ rÃ ng, ngáº¯n gá»n, Ä‘Ãºng vá»‹ trÃ­.
- KhÃ´ng comment thá»«a, khÃ´ng comment code Ä‘Ã£ bá».

### 7.3. Checklist review code
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | Äáº·t tÃªn biáº¿n/class | ÄÃºng chuáº©n | [x] |
| 2 | Comment | Äá»§, rÃµ rÃ ng | [x] |
| 3 | Xá»­ lÃ½ lá»—i | CÃ³ try-catch, log | [x] |
| 4 | Báº£o máº­t | KhÃ´ng lá»™ thÃ´ng tin nháº¡y cáº£m | [x] |
| 5 | Tá»‘i Æ°u | KhÃ´ng láº·p code, khÃ´ng leak | [x] |

### 7.4. VÃ­ dá»¥ code tá»‘t/xáº¥u
```java
// Code tá»‘t
public void logout() {
    clearCache();
    // ...
}

// Code xáº¥u
public void logout() {
    // KhÃ´ng clear cache, khÃ´ng log
}
```

> **Best Practice:**
> - Review code chÃ©o giá»¯a cÃ¡c thÃ nh viÃªn.
> - Sá»­ dá»¥ng tool tá»± Ä‘á»™ng kiá»ƒm tra coding style.

---

## 8. PhÃ¢n tÃ­ch lá»— há»•ng OWASP Mobile

### 8.1. Báº£ng mapping lá»— há»•ng - biá»‡n phÃ¡p phÃ²ng trÃ¡nh
| Lá»— há»•ng | MÃ´ táº£ | Biá»‡n phÃ¡p |
|---------|-------|-----------|
| M1: Improper Platform Usage | Sá»­ dá»¥ng sai API, quyá»n | Chá»‰ dÃ¹ng API Ä‘Æ°á»£c phÃ©p, kiá»ƒm tra quyá»n |
| M2: Insecure Data Storage | LÆ°u trá»¯ khÃ´ng an toÃ n | MÃ£ hÃ³a, khÃ´ng lÆ°u plain text |
| M3: Insecure Communication | Giao tiáº¿p khÃ´ng mÃ£ hÃ³a | Sá»­ dá»¥ng HTTPS, kiá»ƒm tra SSL |
| M4: Insecure Authentication | XÃ¡c thá»±c yáº¿u | Sá»­ dá»¥ng token, timeout session |
| M5: Insufficient Cryptography | MÃ£ hÃ³a yáº¿u | DÃ¹ng thuáº­t toÃ¡n máº¡nh, khÃ´ng tá»± viáº¿t mÃ£ hÃ³a |

### 8.2. Quy trÃ¬nh kiá»ƒm thá»­ báº£o máº­t nÃ¢ng cao
1. Kiá»ƒm tra input validation toÃ n bá»™ API, UI.
2. Kiá»ƒm tra lÆ°u trá»¯ dá»¯ liá»‡u nháº¡y cáº£m (SharedPreferences, file, asset).
3. Kiá»ƒm tra giao tiáº¿p máº¡ng (HTTPS, SSL pinning).
4. Kiá»ƒm tra xÃ¡c thá»±c, phÃ¢n quyá»n.
5. Kiá»ƒm tra log, debug, trace.
6. Kiá»ƒm tra asset/script injection.
7. Kiá»ƒm tra cáº­p nháº­t, integrity asset.

> **Cáº£nh bÃ¡o:**
> - KhÃ´ng kiá»ƒm thá»­ báº£o máº­t Ä‘á»‹nh ká»³ dá»… bá»‹ táº¥n cÃ´ng, rÃ² rá»‰ dá»¯ liá»‡u.

---

## 9. Quy trÃ¬nh DevOps, CI/CD, quáº£n lÃ½ release

### 9.1. SÆ¡ Ä‘á»“ pipeline CI/CD chi tiáº¿t
```mermaid
flowchart TD
    Dev-->|Commit|Repo
    Repo-->|Trigger|CI
    CI-->|Build+Test|Staging
    Staging-->|QA|Prod
    Prod-->|Feedback|Dev
    Prod-->|Rollback|Staging
```

### 9.2. Quy trÃ¬nh rollback, hotfix, release note
1. Khi phÃ¡t hiá»‡n lá»—i production, táº¡o hotfix branch.
2. Sá»­a lá»—i, review, merge vÃ o main.
3. CI/CD build, test láº¡i, deploy lÃªn staging.
4. Náº¿u á»•n, deploy lÃªn production.
5. Ghi chÃº release note, cáº­p nháº­t tÃ i liá»‡u.

### c9.3. Checklist trÆ°á»›c khi release
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | ÄÃ£ pass toÃ n bá»™ unit test | 100% coverage | [x] |
| 2 | ÄÃ£ pass toÃ n bá»™ checklist báº£o máº­t | KhÃ´ng lá»— há»•ng | [x] |
| 3 | ÄÃ£ cáº­p nháº­t tÃ i liá»‡u | Äáº§y Ä‘á»§, rÃµ rÃ ng | [x] |
| 4 | ÄÃ£ kiá»ƒm thá»­ UI trÃªn nhiá»u thiáº¿t bá»‹ | Äá»§ coverage | [x] |

> **Best Practice:**
> - LuÃ´n cÃ³ quy trÃ¬nh rollback rÃµ rÃ ng.
> - Release note pháº£i ghi rÃµ thay Ä‘á»•i, áº£nh hÆ°á»Ÿng, hÆ°á»›ng dáº«n rollback náº¿u cáº§n.

---

## 10. PHá»¤ Lá»¤C

### 10.1. Checklist kiá»ƒm thá»­ toÃ n diá»‡n
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | Kiá»ƒm thá»­ UI | Äáº£m báº£o UI hiá»ƒn thá»‹ Ä‘Ãºng trÃªn má»i thiáº¿t bá»‹ | [x] |
| 2 | Kiá»ƒm thá»­ chá»©c nÄƒng | Äáº£m báº£o cÃ¡c chá»©c nÄƒng chÃ­nh hoáº¡t Ä‘á»™ng | [x] |
| 3 | Kiá»ƒm thá»­ báº£o máº­t | KhÃ´ng lá»™ thÃ´ng tin nháº¡y cáº£m | [x] |
| 4 | Kiá»ƒm thá»­ hiá»‡u nÄƒng | á»¨ng dá»¥ng mÆ°á»£t, khÃ´ng lag | [x] |
| 5 | Kiá»ƒm thá»­ resource/asset | KhÃ´ng cÃ³ file thá»«a, lá»—i | [x] |
| 6 | Kiá»ƒm thá»­ config | KhÃ´ng hardcode thÃ´ng tin bÃ­ máº­t | [x] |
| 7 | Kiá»ƒm thá»­ release | ÄÃºng quy trÃ¬nh, Ä‘á»§ chá»¯ kÃ½ sá»‘ | [x] |

### 10.2. Máº«u log há»‡ thá»‘ng
```log
2024-06-01 10:00:00.123 [INFO] [ApiManager] Request: /api/v1/login, user=abc
2024-06-01 10:00:00.456 [ERROR] [SessionManager] Token expired, user=abc
2024-06-01 10:00:01.789 [DEBUG] [AudioEngine] Play sound: click.wav
```

### 10.3. Máº«u test case chi tiáº¿t
| Test Case ID | MÃ´ táº£ | BÆ°á»›c thá»±c hiá»‡n | Káº¿t quáº£ mong Ä‘á»£i |
|--------------|-------|---------------|------------------|
| TC01 | ÄÄƒng nháº­p thÃ nh cÃ´ng | Nháº­p user/pass Ä‘Ãºng | VÃ o mÃ n hÃ¬nh chÃ­nh |
| TC02 | ÄÄƒng nháº­p sai | Nháº­p sai pass | BÃ¡o lá»—i "Sai máº­t kháº©u" |
| TC03 | Má»Ÿ asset khÃ´ng tá»“n táº¡i | Gá»i asset khÃ´ng cÃ³ | BÃ¡o lá»—i, khÃ´ng crash |
| TC04 | Äá»•i theme | Chá»n theme dark | UI Ä‘á»•i mÃ u Ä‘Ãºng |
| ... | ... | ... | ... |

### 10.4. HÆ°á»›ng dáº«n sá»­ dá»¥ng cho ngÆ°á»i dÃ¹ng cuá»‘i
- ÄÄƒng nháº­p báº±ng tÃ i khoáº£n Zalo.
- Chá»n chá»©c nÄƒng trÃªn menu chÃ­nh.
- Äá»ƒ gá»­i file, chá»n biá»ƒu tÆ°á»£ng "Gá»­i file" vÃ  chá»n file tá»« thiáº¿t bá»‹.
- Äá»ƒ Ä‘á»•i theme, vÃ o CÃ i Ä‘áº·t > Giao diá»‡n > Chá»n theme mong muá»‘n.
- Äá»ƒ bÃ¡o lá»—i, vÃ o CÃ i Ä‘áº·t > Há»— trá»£ > Gá»­i pháº£n há»“i.

### 10.5. HÆ°á»›ng dáº«n kiá»ƒm thá»­ (QA Guide)
- Kiá»ƒm tra UI trÃªn cÃ¡c thiáº¿t bá»‹ Android 7, 8, 9, 10, 11, 12.
- Kiá»ƒm tra chá»©c nÄƒng gá»­i/nháº­n tin nháº¯n, gá»­i file, gá»i video.
- Kiá»ƒm tra cÃ¡c trÆ°á»ng há»£p lá»—i: máº¥t máº¡ng, token háº¿t háº¡n, asset thiáº¿u.
- Kiá»ƒm tra báº£o máº­t: khÃ´ng lá»™ token, khÃ´ng log thÃ´ng tin nháº¡y cáº£m.
- Kiá»ƒm tra hiá»‡u nÄƒng: app khÃ´ng crash khi load nhiá»u áº£nh, video.

### 10.6. Báº£ng mapping lá»—i - chá»©c nÄƒng (Má»Ÿ rá»™ng)
| MÃ£ lá»—i | Chá»©c nÄƒng liÃªn quan | MÃ´ táº£ lá»—i | CÃ¡ch xá»­ lÃ½ | Ghi chÃº |
|--------|--------------------|-----------|------------|--------|
| 1001 | ÄÄƒng nháº­p | Sai máº­t kháº©u | BÃ¡o lá»—i, cho nháº­p láº¡i | Äáº¿m sá»‘ láº§n sai |
| 1002 | ÄÄƒng nháº­p | TÃ i khoáº£n bá»‹ khoÃ¡ | BÃ¡o lá»—i, hÆ°á»›ng dáº«n liÃªn há»‡ support | KhoÃ¡ táº¡m thá»i |
| 2001 | Gá»­i file | File khÃ´ng há»— trá»£ | BÃ¡o lá»—i, hÆ°á»›ng dáº«n Ä‘á»•i Ä‘á»‹nh dáº¡ng | Chá»‰ cho phÃ©p jpg, png, pdf |
| 2002 | Gá»­i file | File quÃ¡ lá»›n | BÃ¡o lá»—i, hÆ°á»›ng dáº«n nÃ©n file | Giá»›i háº¡n 20MB |
| 2003 | Gá»­i file | Máº¥t káº¿t ná»‘i | BÃ¡o lá»—i, cho retry | Kiá»ƒm tra máº¡ng |
| 3001 | Gá»i video | KhÃ´ng tÃ¬m tháº¥y camera | BÃ¡o lá»—i, hÆ°á»›ng dáº«n kiá»ƒm tra quyá»n | Kiá»ƒm tra permission |
| 3002 | Gá»i video | Thiáº¿t bá»‹ khÃ´ng há»— trá»£ | BÃ¡o lá»—i, hÆ°á»›ng dáº«n Ä‘á»•i thiáº¿t bá»‹ | Kiá»ƒm tra model |
| 4001 | Äá»•i máº­t kháº©u | Máº­t kháº©u yáº¿u | BÃ¡o lá»—i, yÃªu cáº§u nháº­p láº¡i | Kiá»ƒm tra Ä‘á»™ máº¡nh |
| 4002 | Äá»•i máº­t kháº©u | Máº­t kháº©u cÅ© sai | BÃ¡o lá»—i, cho nháº­p láº¡i | Äáº¿m sá»‘ láº§n sai |
| 5001 | Quáº£n lÃ½ nhÃ³m | KhÃ´ng Ä‘á»§ quyá»n | BÃ¡o lá»—i, áº©n chá»©c nÄƒng | Chá»‰ admin/moderator |
| 6001 | Nháº­n thÃ´ng bÃ¡o | Token háº¿t háº¡n | BÃ¡o lá»—i, tá»± refresh token | Tá»± Ä‘á»™ng Ä‘Äƒng nháº­p láº¡i |
| 7001 | Quáº£n lÃ½ asset | Asset khÃ´ng tá»“n táº¡i | BÃ¡o lá»—i, log lá»—i | Kiá»ƒm tra integrity |
| 8001 | Quáº£n lÃ½ config | Lá»—i Ä‘á»c config | BÃ¡o lá»—i, dÃ¹ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh | Kiá»ƒm tra file |

### 10.7. Báº£ng mapping resource - chá»©c nÄƒng (Má»Ÿ rá»™ng)
| Resource | Chá»©c nÄƒng sá»­ dá»¥ng | Loáº¡i | ÄÆ°á»ng dáº«n | Vai trÃ² | Ghi chÃº |
|----------|-------------------|------|-----------|--------|--------|
| activity_main.xml | MÃ n hÃ¬nh chÃ­nh | layout | res/layout/activity_main.xml | Äá»‹nh nghÄ©a UI chÃ­nh | LuÃ´n load Ä‘áº§u tiÃªn |
| ic_launcher.xml | Icon app | drawable | res/drawable/ic_launcher.xml | Icon launcher | Äa kÃ­ch thÆ°á»›c |
| loading_lottie.json | Hiá»‡u á»©ng loading | animation | assets/lottiefiles/loading_lottie.json | Hiá»‡u á»©ng Ä‘á»™ng | Tá»‘i Æ°u hiá»‡u nÄƒng |
| Roboto-Regular.ttf | Font UI | font | assets/fonts/Roboto-Regular.ttf | Font chá»¯ chÃ­nh | Há»— trá»£ Ä‘a ngÃ´n ngá»¯ |
| background.png | HÃ¬nh ná»n | image | assets/background/background.png | Trang trÃ­ UI | CÃ³ thá»ƒ Ä‘á»•i theme |
| strings.xml | Äa ngÃ´n ngá»¯ | values | res/values/strings.xml | Chuá»—i giao diá»‡n | Há»— trá»£ i18n |
| colors.xml | Äá»•i theme | values | res/values/colors.xml | Äá»‹nh nghÄ©a mÃ u | Há»— trá»£ dark mode |
| menu_main.xml | Menu chá»©c nÄƒng | menu | res/menu/menu_main.xml | Äá»‹nh nghÄ©a menu | CÃ³ thá»ƒ tuá»³ biáº¿n |
| emoticon.png | Emoticon UI | image | assets/emoticons/emoticon.png | Icon cáº£m xÃºc | Sá»­ dá»¥ng trong chat |
| phone_data.json | Tra cá»©u sá»‘ Ä‘iá»‡n thoáº¡i | data | assets/dataphonenumber/phone_data.json | Dá»¯ liá»‡u tra cá»©u | Cáº­p nháº­t Ä‘á»‹nh ká»³ |
| config.properties | Cáº¥u hÃ¬nh app | config | assets/config.properties | Äá»c config runtime | KhÃ´ng hardcode |
| fade_in.xml | Hiá»‡u á»©ng chuyá»ƒn cáº£nh | anim | res/anim/fade_in.xml | Animation UI | TÄƒng tráº£i nghiá»‡m |
| splash.xml | Splash screen | layout | res/layout/splash.xml | MÃ n hÃ¬nh khá»Ÿi Ä‘á»™ng | Hiá»ƒn thá»‹ logo |

### 10.8. HÆ°á»›ng dáº«n DevOps, CI/CD, release
- Sá»­ dá»¥ng Git Ä‘á»ƒ quáº£n lÃ½ source, táº¡o branch cho tá»«ng tÃ­nh nÄƒng.
- Sá»­ dá»¥ng Jenkins/GitHub Actions Ä‘á»ƒ build, test, kiá»ƒm thá»­ tá»± Ä‘á»™ng.
- Quy trÃ¬nh release:
  1. Merge code vÃ o branch release.
  2. Build release, kiá»ƒm tra chá»¯ kÃ½ sá»‘.
  3. Kiá»ƒm thá»­ toÃ n diá»‡n (QA, UAT).
  4. ÄÃ³ng gÃ³i APK, upload lÃªn Google Play.
  5. Theo dÃµi log, pháº£n há»“i ngÆ°á»i dÃ¹ng.
- Checklist release:
  - [x] ÄÃ£ kiá»ƒm thá»­ Ä‘á»§ cÃ¡c case?
  - [x] ÄÃ£ kiá»ƒm tra chá»¯ kÃ½ sá»‘?
  - [x] ÄÃ£ cáº­p nháº­t changelog?
  - [x] ÄÃ£ backup dá»¯ liá»‡u quan trá»ng?

### 10.9. Báº£ng phÃ¢n quyá»n chá»©c nÄƒng
| Chá»©c nÄƒng | Guest | User thÆ°á»ng | Moderator | Support | Admin | Super Admin | Ghi chÃº |
|-----------|-------|-------------|-----------|---------|-------|-------------|--------|
| ÄÄƒng nháº­p |   | x | x | x | x | x | Guest khÃ´ng Ä‘Äƒng nháº­p |
| ÄÄƒng kÃ½ tÃ i khoáº£n | x |   |   |   |   |   | User Ä‘Ã£ Ä‘Äƒng kÃ½ khÃ´ng dÃ¹ng |
| Xem thÃ´ng tin cÃ¡ nhÃ¢n |   | x | x | x | x | x | |
| Sá»­a thÃ´ng tin cÃ¡ nhÃ¢n |   | x | x | x | x | x | |
| Äá»•i máº­t kháº©u |   | x | x | x | x | x | |
| Gá»­i tin nháº¯n |   | x | x | x | x | x | |
| Nháº­n tin nháº¯n |   | x | x | x | x | x | |
| Gá»­i file |   | x | x | x | x | x | Giá»›i háº¡n dung lÆ°á»£ng vá»›i User thÆ°á»ng |
| Nháº­n file |   | x | x | x | x | x | |
| Táº¡o nhÃ³m chat |   | x | x | x | x | x | |
| ThÃªm/xoÃ¡ thÃ nh viÃªn nhÃ³m |   |   | x | x | x | x | Chá»‰ Moderator trá»Ÿ lÃªn |
| XoÃ¡ nhÃ³m chat |   |   |   |   | x | x | Chá»‰ Admin trá»Ÿ lÃªn |
| Gá»i video |   | x | x | x | x | x | |
| Quáº£n lÃ½ user |   |   |   |   | x | x | |
| KhoÃ¡/má»Ÿ khoÃ¡ user |   |   |   |   | x | x | |
| Xem log há»‡ thá»‘ng |   |   |   |   |   | x | Báº£o máº­t cao |
| Xem bÃ¡o cÃ¡o lá»—i |   |   |   | x | x | x | Support trá»Ÿ lÃªn |
| Truy cáº­p API admin |   |   |   |   | x | x | |
| Truy cáº­p API public | x | x | x | x | x | x | |
| Quáº£n lÃ½ asset |   |   |   |   | x | x | |
| Quáº£n lÃ½ config |   |   |   |   | x | x | |
| Quáº£n lÃ½ backup |   |   |   |   | x | x | |
| Quáº£n lÃ½ phÃ¢n quyá»n |   |   |   |   |   | x | Chá»‰ Super Admin |
| Äá»•i theme |   | x | x | x | x | x | |
| Xem thÃ´ng bÃ¡o |   | x | x | x | x | x | |
| Gá»­i thÃ´ng bÃ¡o há»‡ thá»‘ng |   |   |   |   | x | x | |
| Truy cáº­p chá»©c nÄƒng test/dev |   |   |   |   |   | x | Chá»‰ Super Admin |

### 10.10. Mapping OWASP Mobile Top 10
| OWASP | Vá»‹ trÃ­ kiá»ƒm thá»­ | Class/Module liÃªn quan | Tráº¡ng thÃ¡i kiá»ƒm thá»­ | HÆ°á»›ng dáº«n kiá»ƒm thá»­ | VÃ­ dá»¥ lá»—i/phÃ¡t hiá»‡n |
|-------|----------------|-----------------------|---------------------|--------------------|---------------------|
| M1 - Improper Platform Usage | AndroidManifest, code Java | PermissionManager, DeviceManager | [x] | Kiá»ƒm tra quyá»n, intent, export | Exported activity khÃ´ng cáº§n thiáº¿t |
| M2 - Insecure Data Storage | asset, config, code | ConfigManager, AssetLoader | [x] | Kiá»ƒm tra lÆ°u pass, token, file | LÆ°u pass plain text trong asset |
| M3 - Insecure Communication | ApiManager, network | ApiManager, FileSender | [x] | Kiá»ƒm tra HTTPS, cert pinning | Gá»­i API qua HTTP |
| M4 - Insecure Authentication | SessionManager, login | SessionManager, RegisterManager | [x] | Kiá»ƒm tra xÃ¡c thá»±c, timeout | KhÃ´ng timeout session |
| M5 - Insufficient Cryptography | asset, code | MessageSender, ConfigManager | [x] | Kiá»ƒm tra mÃ£ hoÃ¡, thuáº­t toÃ¡n | Sá»­ dá»¥ng MD5, khÃ´ng salt |
| M6 - Insecure Authorization | API, backend | ApiManager, UserManager | [x] | Kiá»ƒm tra phÃ¢n quyá»n API | User thÆ°á»ng truy cáº­p API admin |
| M7 - Client Code Quality | code Java, asset | LogManager, AssetLoader | [x] | Kiá»ƒm tra code, log, debug | Log thÃ´ng tin nháº¡y cáº£m |
| M8 - Code Tampering | APK, asset | VersionManager, AssetLoader | [x] | Kiá»ƒm tra integrity, hash | Asset bá»‹ thay Ä‘á»•i khÃ´ng phÃ¡t hiá»‡n |
| M9 - Reverse Engineering | APK, code | Proguard, obfuscation | [x] | Kiá»ƒm tra obfuscation, debug | KhÃ´ng dÃ¹ng Proguard |
| M10 - Extraneous Functionality | code, config | ConfigManager, LogManager | [x] | Kiá»ƒm tra code test, debug | Äá»ƒ láº¡i API test trong release |

### 10.11. Máº«u hÆ°á»›ng dáº«n viáº¿t tÃ i liá»‡u dá»± Ã¡n
- Má»—i module cáº§n cÃ³ README.md mÃ´ táº£ chá»©c nÄƒng, luá»“ng chÃ­nh, vÃ­ dá»¥ sá»­ dá»¥ng.
- Äáº·t tÃªn file, thÆ° má»¥c rÃµ rÃ ng, nháº¥t quÃ¡n.
- CÃ³ checklist review code, checklist test cho tá»«ng module.
- Äá»‹nh ká»³ cáº­p nháº­t tÃ i liá»‡u khi cÃ³ thay Ä‘á»•i lá»›n.

### 10.12. Máº«u bÃ¡o cÃ¡o lá»—i (bug report)
- MÃ´ táº£ lá»—i: ...
- BÆ°á»›c tÃ¡i hiá»‡n: ...
- Káº¿t quáº£ mong Ä‘á»£i: ...
- Káº¿t quáº£ thá»±c táº¿: ...
- Log Ä‘Ã­nh kÃ¨m: ...
- áº¢nh/video minh hoáº¡: ...

### 10.13. Máº«u script kiá»ƒm tra resource/asset khÃ´ng dÃ¹ng
```bash
# Script kiá»ƒm tra resource khÃ´ng dÃ¹ng (giáº£ láº­p)
grep -r "R\." src/main/java/ > used_resources.txt
ls src/main/res/* > all_resources.txt
comm -23 all_resources.txt used_resources.txt > unused.txt
cat unused.txt
```

### 10.14. Máº«u hÆ°á»›ng dáº«n backup/restore dá»¯ liá»‡u
- Äá»‹nh ká»³ backup dá»¯ liá»‡u user, config, asset quan trá»ng.
- LÆ°u trá»¯ backup á»Ÿ nÆ¡i an toÃ n, cÃ³ kiá»ƒm soÃ¡t truy cáº­p.
- HÆ°á»›ng dáº«n restore: copy file backup vÃ o Ä‘Ãºng thÆ° má»¥c, kiá»ƒm tra integrity.

### 10.15. Máº«u hÆ°á»›ng dáº«n kiá»ƒm thá»­ báº£o máº­t
- Kiá»ƒm tra khÃ´ng log thÃ´ng tin nháº¡y cáº£m (token, pass, ...).
- Kiá»ƒm tra khÃ´ng lÆ°u plain text password trong asset, config.
- Kiá»ƒm tra khÃ´ng Ä‘á»ƒ lá»™ API key, secret trong code, asset.
- Kiá»ƒm tra cÃ¡c endpoint API cÃ³ xÃ¡c thá»±c, phÃ¢n quyá»n.

### 10.16. Máº«u mapping chá»©c nÄƒng - class/module
| Chá»©c nÄƒng | Class/Module chÃ­nh | File liÃªn quan | Vai trÃ² | Ghi chÃº |
|-----------|--------------------|---------------|--------|--------|
| ÄÄƒng nháº­p | SessionManager | oi/SessionManager.java | Xá»­ lÃ½ Ä‘Äƒng nháº­p, lÆ°u session | Báº£o máº­t token |
| Gá»­i file | FileSender | oa/FileSender.java | Gá»­i file qua API | Kiá»ƒm tra kÃ­ch thÆ°á»›c |
| Gá»i video | VideoCallManager | p1/VideoCallManager.java | Quáº£n lÃ½ cuá»™c gá»i video | Kiá»ƒm tra quyá»n camera |
| ÄÄƒng kÃ½ | RegisterManager | oi/RegisterManager.java | ÄÄƒng kÃ½ tÃ i khoáº£n má»›i | Validate input |
| Äá»•i máº­t kháº©u | PasswordChanger | oi/PasswordChanger.java | Äá»•i máº­t kháº©u user | Kiá»ƒm tra Ä‘á»™ máº¡nh |
| Quáº£n lÃ½ user | UserManager | oi/UserManager.java | CRUD user | PhÃ¢n quyá»n |
| Quáº£n lÃ½ nhÃ³m | GroupManager | oa/GroupManager.java | Táº¡o, sá»­a, xoÃ¡ nhÃ³m | Kiá»ƒm tra quyá»n |
| Gá»­i tin nháº¯n | MessageSender | p1/MessageSender.java | Gá»­i/nháº­n tin nháº¯n | MÃ£ hoÃ¡ ná»™i dung |
| Nháº­n thÃ´ng bÃ¡o | NotificationManager | p1/NotificationManager.java | Push notification | Xá»­ lÃ½ Ä‘a thiáº¿t bá»‹ |
| Quáº£n lÃ½ media | MediaManager | oa/MediaManager.java | Upload/download áº£nh, video | Kiá»ƒm thá»­ hiá»‡u nÄƒng |
| Quáº£n lÃ½ asset | AssetLoader | assets/AssetLoader.java | Load asset Ä‘á»™ng | Kiá»ƒm tra integrity |
| Quáº£n lÃ½ config | ConfigManager | config/ConfigManager.java | Äá»c config, biáº¿n mÃ´i trÆ°á»ng | KhÃ´ng hardcode |
| Quáº£n lÃ½ log | LogManager | util/LogManager.java | Ghi log há»‡ thá»‘ng | KhÃ´ng log nháº¡y cáº£m |
| Quáº£n lÃ½ API | ApiManager | oa/ApiManager.java | Giao tiáº¿p backend | Retry, timeout |
| Quáº£n lÃ½ theme | ThemeManager | p1/ThemeManager.java | Äá»•i theme UI | Há»— trá»£ dark mode |
| Quáº£n lÃ½ quyá»n | PermissionManager | oi/PermissionManager.java | Kiá»ƒm tra quyá»n Android | Xin quyá»n Ä‘á»™ng |
| Quáº£n lÃ½ backup | BackupManager | util/BackupManager.java | Backup/restore dá»¯ liá»‡u | Kiá»ƒm tra integrity |
| Quáº£n lÃ½ version | VersionManager | util/VersionManager.java | Kiá»ƒm tra version app | ThÃ´ng bÃ¡o update |
| Quáº£n lÃ½ thiáº¿t bá»‹ | DeviceManager | util/DeviceManager.java | Láº¥y thÃ´ng tin thiáº¿t bá»‹ | Äa ná»n táº£ng |
| Quáº£n lÃ½ session | SessionManager | oi/SessionManager.java | LÆ°u, xoÃ¡ session | Äa thiáº¿t bá»‹ |

### 10.17. Máº«u mapping resource - asset
| Asset | Loáº¡i | Chá»©c nÄƒng sá»­ dá»¥ng | ÄÆ°á»ng dáº«n |
|-------|------|-------------------|-----------|
| emoticon.png | image | Emoticon UI | assets/emoticons/emoticon.png |
| phone_data.json | data | Tra cá»©u sá»‘ Ä‘iá»‡n thoáº¡i | assets/dataphonenumber/phone_data.json |

### 10.18. Máº«u hÆ°á»›ng dáº«n cáº­p nháº­t resource/asset
- Khi cáº­p nháº­t asset, kiá»ƒm tra integrity (hash, chá»¯ kÃ½ sá»‘).
- Äáº·t tÃªn asset rÃµ rÃ ng, cÃ³ version náº¿u cáº§n.
- XoÃ¡ asset cÅ© khÃ´ng dÃ¹ng Ä‘á»ƒ trÃ¡nh rÃ¡c.
- Cáº­p nháº­t tÃ i liá»‡u, checklist khi thay Ä‘á»•i asset.

### 10.19. Máº«u hÆ°á»›ng dáº«n kiá»ƒm thá»­ UI/UX
- Kiá»ƒm tra UI trÃªn nhiá»u kÃ­ch thÆ°á»›c mÃ n hÃ¬nh.
- Kiá»ƒm tra dark mode, light mode.
- Kiá»ƒm tra accessibility (phÃ³ng to, Ä‘á»c mÃ n hÃ¬nh).
- Kiá»ƒm tra pháº£n há»“i khi thao tÃ¡c nhanh, liÃªn tá»¥c.

### 10.20. Máº«u hÆ°á»›ng dáº«n kiá»ƒm thá»­ hiá»‡u nÄƒng
- Äo thá»i gian load mÃ n hÃ¬nh chÃ­nh.
- Äo thá»i gian gá»­i/nháº­n file lá»›n.
- Äo má»©c sá»­ dá»¥ng RAM, CPU khi cháº¡y lÃ¢u.
- Kiá»ƒm tra app cÃ³ crash khi load nhiá»u áº£nh/video khÃ´ng.

### 10.21. Máº«u hÆ°á»›ng dáº«n kiá»ƒm thá»­ release
- Kiá»ƒm tra láº¡i toÃ n bá»™ checklist trÆ°á»›c khi release.
- Build release, kiá»ƒm tra chá»¯ kÃ½ sá»‘.
- Kiá»ƒm thá»­ trÃªn nhiá»u thiáº¿t bá»‹, há»‡ Ä‘iá»u hÃ nh.
- ÄÃ³ng gÃ³i APK, kiá»ƒm tra integrity.
- Theo dÃµi log sau khi release.

### 10.22. Checklist kiá»ƒm thá»­ API
| STT | Háº¡ng má»¥c | MÃ´ táº£ | ÄÃ£ kiá»ƒm tra |
|-----|----------|-------|-------------|
| 1 | ÄÃºng endpoint | ÄÃºng URL, version, path | [x] |
| 2 | ÄÃºng method | GET/POST/PUT/DELETE Ä‘Ãºng chuáº©n | [x] |
| 3 | Tham sá»‘ báº¯t buá»™c | Äá»§, Ä‘Ãºng kiá»ƒu, validate | [x] |
| 4 | Tham sá»‘ tuá»³ chá»n | CÃ³ xá»­ lÃ½ máº·c Ä‘á»‹nh, validate | [x] |
| 5 | XÃ¡c thá»±c | CÃ³ kiá»ƒm tra token, session, API key | [x] |
| 6 | PhÃ¢n quyá»n | ÄÃºng quyá»n user, admin, guest | [x] |
| 7 | Kiá»ƒm thá»­ lá»—i | Thiáº¿u param, sai kiá»ƒu, lá»—i server | [x] |
| 8 | Kiá»ƒm thá»­ báº£o máº­t | SQLi, XSS, CSRF, injection | [x] |
| 9 | Kiá»ƒm thá»­ rate limit | Giá»›i háº¡n sá»‘ request, bÃ¡o lá»—i Ä‘Ãºng | [x] |
| 10 | Kiá»ƒm thá»­ timeout | Server cháº­m, client timeout | [x] |
| 11 | Kiá»ƒm thá»­ dá»¯ liá»‡u tráº£ vá» | ÄÃºng format, Ä‘á»§ trÆ°á»ng, khÃ´ng thá»«a | [x] |
| 12 | Kiá»ƒm thá»­ mÃ£ lá»—i | ÄÃºng mÃ£ lá»—i, thÃ´ng Ä‘iá»‡p rÃµ rÃ ng | [x] |
| 13 | Kiá»ƒm thá»­ log | CÃ³ log request, response, lá»—i | [x] |
| 14 | Kiá»ƒm thá»­ hiá»‡u nÄƒng | ÄÃ¡p á»©ng nhanh, táº£i lá»›n | [x] |
| 15 | Kiá»ƒm thá»­ upload/download | File lá»›n, nhiá»u loáº¡i file | [x] |
| 16 | Kiá»ƒm thá»­ encoding | UTF-8, kÃ½ tá»± Ä‘áº·c biá»‡t | [x] |
| 17 | Kiá»ƒm thá»­ versioning | ÄÃºng version API, backward compatible | [x] |
| 18 | Kiá»ƒm thá»­ cache | Header cache, no-cache Ä‘Ãºng | [x] |
| 19 | Kiá»ƒm thá»­ CORS | ÄÃºng policy, khÃ´ng lá»™ thÃ´ng tin | [x] |
| 20 | Kiá»ƒm thá»­ pagination | ÄÃºng limit, offset, tá»•ng sá»‘ báº£n ghi | [x] |
| 21 | Kiá»ƒm thá»­ filter/sort | ÄÃºng logic, khÃ´ng lá»—i | [x] |
| 22 | Kiá»ƒm thá»­ concurrency | Nhiá»u request Ä‘á»“ng thá»i | [x] |
| 23 | Kiá»ƒm thá»­ rollback | Lá»—i giá»¯a chá»«ng cÃ³ rollback | [x] |
| 24 | Kiá»ƒm thá»­ dá»¯ liá»‡u nháº¡y cáº£m | KhÃ´ng tráº£ vá» pass, token, ... | [x] |
| 25 | Kiá»ƒm thá»­ input lá»›n | Chuá»—i dÃ i, file lá»›n, sá»‘ lá»›n | [x] |
| 26 | Kiá»ƒm thá»­ input Ä‘áº·c biá»‡t | KÃ½ tá»± láº¡, emoji, kÃ½ tá»± escape | [x] |
| 27 | Kiá»ƒm thá»­ tráº¡ng thÃ¡i HTTP | 200/201/400/401/403/404/500 Ä‘Ãºng | [x] |
| 28 | Kiá»ƒm thá»­ header | Äá»§, Ä‘Ãºng, khÃ´ng thá»«a | [x] |
| 29 | Kiá»ƒm thá»­ redirect | CÃ³/khÃ´ng, Ä‘Ãºng logic | [x] |
| 30 | Kiá»ƒm thá»­ tÃ i liá»‡u API | Äá»§, rÃµ rÃ ng, vÃ­ dá»¥ cá»¥ thá»ƒ | [x] |

---